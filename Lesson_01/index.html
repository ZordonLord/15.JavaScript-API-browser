<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расписание занятий</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .schedule-card {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<div class="container py-5">
    <h1 class="text-center mb-4">Расписание занятий</h1>
    <div id="schedule" class="row">
        <!-- Занятия будут добавляться сюда динамически -->
    </div>
</div>

<script>
    // JSON-данные с расписанием
    const scheduleData = [
        {
            id: 1,
            name: "Йога",
            time: "09:00 - 10:00",
            maxParticipants: 20,
            currentParticipants: 15
        },
        {
            id: 2,
            name: "Кардио тренировка",
            time: "10:30 - 11:30",
            maxParticipants: 25,
            currentParticipants: 25
        },
        {
            id: 3,
            name: "Силовая тренировка",
            time: "12:00 - 13:00",
            maxParticipants: 30,
            currentParticipants: 10
        }
    ];

    // Контейнер для отображения расписания
    const scheduleContainer = document.getElementById('schedule');

    // Функция для создания карточки занятия
    function createScheduleCard(session) {
        const isFull = session.currentParticipants >= session.maxParticipants;

        const card = document.createElement('div');
        card.className = 'col-md-4 schedule-card';
        card.innerHTML = `
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">${session.name}</h5>
                        <p class="card-text">Время: ${session.time}</p>
                        <p class="card-text">Участники: ${session.currentParticipants} / ${session.maxParticipants}</p>
                        <button class="btn btn-primary w-100" ${isFull ? 'disabled' : ''} data-action="enroll" data-id="${session.id}">
                            Записаться
                        </button>
                        <button class="btn btn-secondary w-100 mt-2" data-action="cancel" data-id="${session.id}">
                            Отменить запись
                        </button>
                    </div>
                </div>
            `;
        return card;
    }

    // Функция для обновления расписания
    function updateSchedule() {
        scheduleContainer.innerHTML = '';
        scheduleData.forEach(session => {
            const card = createScheduleCard(session);
            scheduleContainer.appendChild(card);
        });
    }

    // Функция для обновления данных занятия
    function updateSession(id, action) {
        const session = scheduleData.find(item => item.id === id);

        if (!session) return;

        if (action === 'enroll' && session.currentParticipants < session.maxParticipants) {
            session.currentParticipants++;
        } else if (action === 'cancel' && session.currentParticipants > 0) {
            session.currentParticipants--;
        }

        updateSchedule();
    }

    // Обработчик событий
    scheduleContainer.addEventListener('click', (e) => {
        const button = e.target;
        const action = button.getAttribute('data-action');
        const id = parseInt(button.getAttribute('data-id'));

        if (action && id) {
            updateSession(id, action);
        }
    });

    // Инициализация расписания
    updateSchedule();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
